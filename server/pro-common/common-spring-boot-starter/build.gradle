plugins {
    id "java-library"
    id 'maven-publish'
}

ext{
    httpclientVersion="4.5.1"
    mailVersion="1.4"
    gsonVersion="2.8.6"
    jedisVersion="2.9.1"
    redissonVersion="3.13.2"
    transportVersion="6.8.12"
    zookeeperVersion="3.6.2"
    curatorVersion="5.1.0"
    dubboSpringBootStartVersion="1.1.17"
    commonsLangVersion="3.11"
    caffeineVersion="2.8.8"
}

dependencies {

    compile("com.common:common-spring-boot-api:${commonSpringBootApiVersion}")

    //spring
    api("org.springframework.boot:spring-boot-starter-web:$springBootVersion")
    api("org.redisson:redisson-spring-boot-starter:$redissonVersion")
    api("org.springframework.boot:spring-boot-starter-aop:$springBootVersion")
    api("com.alibaba:druid-spring-boot-starter:${dubboSpringBootStartVersion}")
    api("org.apache.commons:commons-lang3:${commonsLangVersion}")
    api ("org.apache.curator:curator-framework:$curatorVersion"){
        exclude group: 'org.apache.zookeeper', module: 'zookeeper'
    }
    //mybatis
    api("org.mybatis:mybatis:$mybatisVersion")
    api("org.mybatis:mybatis-spring:$mybatisSpringVersion")
    api("org.mybatis.spring.boot:mybatis-spring-boot-starter:$mybatisSpringBootStarterVersion")
    api("org.springframework.boot:spring-boot-starter-jdbc:$springBootVersion")
    api("mysql:mysql-connector-java:$mysqlConnectorVersion")
    //redis,rabbitmq
    api("org.springframework.boot:spring-boot-starter-data-redis:$springBootVersion")
    api("redis.clients:jedis:$jedisVersion")
    api("org.springframework.boot:spring-boot-starter-amqp:$springBootVersion")
    //zk
    api ("org.apache.curator:curator-recipes:$curatorVersion")
    api ("org.apache.zookeeper:zookeeper:$zookeeperVersion"){
        exclude group: 'org.slf4j', module: 'slf4j-log4j12'
        exclude group: 'log4j', module: 'log4j'
    }
    //es
    api("org.elasticsearch.client:elasticsearch-rest-high-level-client:6.8.7"){
        exclude group: 'org.elasticsearch', module: 'elasticsearch'
    }
    api("org.elasticsearch.client:transport:$transportVersion")
    api("org.elasticsearch:elasticsearch:6.8.7")
    //tool
    api("com.github.ben-manes.caffeine:caffeine:${caffeineVersion}")
    api("org.apache.httpcomponents:httpclient:$httpclientVersion")
    api("javax.mail:mail:$mailVersion")
    api("com.google.code.gson:gson:$gsonVersion")

    api("org.springframework.boot:spring-boot-starter-test:$springBootVersion")

}

publishing {
    publications {
        maven(MavenPublication) {
            groupId = 'com.common'
            artifactId = 'common-spring-boot-starter'
            version = '1.0.0'
            from components.java
        }
    }
}